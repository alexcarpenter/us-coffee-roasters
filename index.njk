{% extends "layouts/default.njk" %}

{% block content %}
  {% for state, roasters in roasters | sort(false,true,"state") | groupby("state") %}
  <section class="c-section">
    <h2 class="c-section__heading" id="{{ state | slugify }}"><a href="#{{ state | slugify }}">{{ state }} ({{ roasters.length }})</a></h2>
    <ul class="o-grid">
      {% for roaster in roasters | sort(false, true, 'name') %}
      <li class="o-grid__item">
        <article class="c-card">
          <h3 class="c-card__heading">{{ roaster.name }}</h3>
          {% if roaster.address %}
          <p class="c-card__address">{{ roaster.address }}</p>
          {% endif %}
          {% if roaster.website %}
          <a class="c-card__anchor" href="//{{ roaster.website }}"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path fill="currentcolor" d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg> Visit website</a>
          {% endif %}
        </article>
      </li>
      {% endfor %}
    </ul>
  </section>
  {% endfor %}
{% endblock %}
